<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../solutia-maxima-components/components/view-problem/view-problem.component.html">
<link rel="import" href="../redux-store-element/redux-store.html">
<link rel="import" href="../paper-button/paper-button.html">

<dom-module id="prendus-take-quiz">
    <template>
        <iron-ajax id="startQuizSessionAjax" url="[[endpointDomain]]/api/quiz/startsession" method="post" content-type="application/json" handle-as="json"></iron-ajax>
        <iron-ajax id="endQuizSessionAjax" url="[[endpointDomain]]/api/quiz/endsession" method="post" content-type="application/json" handle-as="json"></iron-ajax>
        <redux-store on-statechange="mapStateToThis" action="[[action]]" store-name="VIEW_QUIZ_COMPONENT_STORE"></redux-store>

        <template is="dom-repeat" items="[[questions]]">
            <solutia-maxima-view-problem id="[[item.id]]" question-id="[[item.id]]" quiz-session-id="[[quizSessionIdMutable]]" jwt="[[jwt]]" user-full-name="[[userFullName]]" user-email="[[userEmail]]" course-id="[[courseId]]" on-showhint="hintShowed" on-showanswer="answerShowed" on-showworkedsolution="workedSolutionShowed" on-answertyped="answerTyped" on-checkboxchanged="checkboxChanged" on-radioselected="radioSelected" on-multipleinputtyped="multipleInputTyped"></solutia-maxima-view-problem>
            <hr style="width: 50vw; border: 0px; height: 1px; background: rgba(0, 0, 0, .25)">
        </template>

        <div style="display: flex; flex-direction: row; align-items: center; justify-content: center; margin-top: 25px">
            <paper-button on-tap="submitClicked" raised>submit quiz</paper-button>
        </div>
    </template>

    <script>System.import('/bower_components/view-quiz-component/take-quiz.component.ts');</script>
</dom-module>
