<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/redux-store-element/redux-store.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/solutia-maxima-components/components/view-problem/view-problem.component.html">
<link rel="import" href="../../bower_components/solutia-maxima-components/components/edit-problem/edit-problem.component.html">

<dom-module id="prendus-quiz-editor">
    <template>
        <redux-store on-statechange="mapStateToThis" action="[[action]]"></redux-store>
        <iron-ajax id="getQuestionIdsAjax" method="get" url="[[endpointDomain]]/api/questionids/uid/[[jwt]]" handle-as="json"></iron-ajax>

        <paper-dialog id="editQuestionModal" with-backdrop="true">
            <solutia-maxima-edit-problem jwt="[[jwt]]" question-id="[[currentEditQuestionId]]"></solutia-maxima-edit-problem>
        </paper-dialog>

        <div style="display: flex; flex-direction: row">
            <div style="display: flex; flex-direction: column; flex: 1; box-shadow: 0px 0px 3px black; margin: 50px">
                <h1>Quiz</h1>
                <template is="dom-repeat" items="[[quizQuestionIds]]">
                    <solutia-maxima-view-problem question-id="[[item]]" quiz-session-id="DEFAULT_QUIZ" jwt="[[jwt]]" concise></solutia-maxima-view-problem>
                    <div style="display: flex; flex-direction: row; align-items: center; justify-content: center">
                        <button on-click="removeQuestionFromQuiz">Remove</button>
                    </div>
                </template>
            </div>

            <div style="display: flex; flex-direction: column; flex: 1; box-shadow: 0px 0px 3px black; margin: 50px">
                <h1>My Questions</h1>
                <button on-click="createQuestion">Create Question</button>
                <template is="dom-repeat" items="[[userQuestionIds]]">
                    <solutia-maxima-view-problem question-id="[[item]]" quiz-session-id="DEFAULT_QUIZ" jwt="[[jwt]]" concise></solutia-maxima-view-problem>
                    <div style="display: flex; flex-direction: row; align-items: center; justify-content: center">
                        <button on-click="addQuestionToQuiz">Add to quiz</button>
                        <button on-click="editQuestion">Edit</button>
                    </div>
                </template>
            </div>
        </div>
    </template>

    <script>System.import('/components/quiz-editor/quiz-editor.component.ts');</script>
</dom-module>
