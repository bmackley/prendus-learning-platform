<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/redux-store-element/redux-store.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">

<link rel="import" href="../prendus-notification/prendus-notification.html">

<dom-module id="prendus-login">
  <style>
    :host {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    paper-card {
      width: 100%;
      max-width: 320px;
    }
    paper-button.indigo {
      background-color: var(--prendus-primary-color);
      color: white;
    }
    #create-account {
      padding: 16px;
    }
  </style>
  <template>
    <redux-store action="[[action]]"></redux-store>
      <paper-card id = "loginFormCard" heading ="Login">
        <form class="card-content" is="iron-form" id="loginForm" on-keydown="loginKeydown">
          <paper-input name="email" id="loginEmail" label="Email" required auto-validate></paper-input>
          <paper-input name="password" id="loginPassword" label="Password" type="password" required auto-validate></paper-input>
        </form>
        <div class="card-actions">
          <paper-button id="signin-submit" noink>Log In</paper-button>
          <paper-button noink on-click="sendResetEmailTrigger">Forgot Password</paper-button>
        </div>
        <div id="create-account">Don't have an account? <a href="/signup"><span on-tap="create-account">Sign up</span></a></div>
      </paper-card>
      <paper-dialog id = "forgotPasswordModal" modal>
        <div>
          <!-- Look up Iron keys to change this -->
          <form is="iron-form">
            <h2>Enter Email to Send Password Reset Link</h2>
            <paper-input name="resetPasswordEmail" id = "resetPasswordEmail" label="Email" required auto-validate></paper-input>
            <paper-button noink dialog-dismiss>Cancel</paper-button>
            <paper-button noink on-click="sendResetEmail">Submit</paper-button>
          </form>
        </div>
      </paper-dialog>
      <prendus-notification error-message="[[errorMessage]]"></prendus-notification>
  </template>

  <script src="prendus-login.ts"></script>
</dom-module>
