<link href="../../bower_components/polymer/polymer.html" rel="import">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-dropdown/iron-dropdown.html">

<dom-module id="prendus-navbar">
  <style>

		navbar-text,
		paper-button.navbar-text {
			color: white;
		}

		a:hover {
			text-decoration: none;
		}

    paper-item:hover {
      background-color: rgba(0, 0, 0, 0.2);
    }

		#logo {
			height: 50px;
		}

    #home-link {
      margin-right: auto;
    }

    #menu-name-button {
      cursor: pointer;
    }

		#menu-icon-button {
			cursor: pointer;
			display: none;
		}

    #menu-holder {
      align-self: flex-end;
			color: initial;
    }

		.menu-item {
			cursor: pointer;
		}

		@media (max-width: 768px) {
			#menu-name-button {
				display: none;
			}
			#menu-icon-button {
				display: block;
			}
		}

  </style>

  <template>

    <redux-store on-statechange="mapStateToThis" action="[[action]]"></redux-store>
    <paper-header-panel>
        <paper-toolbar>
          <a id="home-link" href="/"><img id="logo" src="../../images/navbar-logo.png" alt="Prendus"></a>
          <template is="dom-if" if="[[username]]">
            <div id="menu-name-button" class="navbar-text" on-tap="toggleMenu">
              <span>[[username]]</span><paper-button noink>Menu <iron-icon icon="arrow-drop-down"></iron-icon></paper-button>
            </div>
						<iron-icon id="menu-icon-button" class="navbar-text" icon="menu" on-tap="toggleMenu"></iron-icon>

            <div id="menu-holder">
              <iron-dropdown id="menu-items" horizontal-align="right" no-auto-focus>
                <paper-card class="dropdown-content">
                  <paper-listbox id="user-menu-listbox">
                    <a class="menu-item" href="/profile" tabindex="-1"><paper-item><paper-button noink on-tap="toggleMenu">Account ([[username]])</paper-button></paper-item></a>
                    <a class="menu-item" href="/courses/home" tabindex="-1"><paper-item><paper-button noink on-tap="toggleMenu">My Courses</paper-button></paper-item></a>
                    <a href="/learning-structure" tabindex="-1"><paper-item><paper-button on-tap="toggleMenu">Edit learning structure</paper-button></paper-item></a>
                    <paper-item class="menu-item" on-tap="logOutUser"><paper-button noink>Logout</paper-button></paper-item>
                  </paper-listbox>
                </paper-card>
              </iron-dropdown>
            </div>
          </template>
          <template is="dom-if" if="[[!username]]">
            <a href="/login" tabindex="-1"><paper-button class="navbar-text" noink>Log In</paper-button></a>
            <a href="/signup" tabindex="-1"><paper-button class="navbar-text" noink>Sign Up</paper-button></a>
          </template>
        </paper-toolbar>
    </paper-header-panel>
  </template>

  <script src="prendus-navbar.ts"></script>
</dom-module>
