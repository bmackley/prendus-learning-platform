<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/redux-store-element/redux-store.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html">

<dom-module id="prendus-concept-quiz-container">
  <template>

    <style>

      :host {
        display: block;
        padding: 10px;
      }

      .quiz-row {
        padding: 10px;
        cursor: pointer;
      }

      .quiz-icon {
        color: rgba(0, 0, 0, .5);
      }

      .quiz-icon:hover {
        color: rgba(0, 0, 0, .8);
      }

      .delete-button {
        color: white;
        background: red;
      }

      .add-quiz-button {
        background-color: var(--prendus-primary-color);
        color: white;
      }

    </style>

    <redux-store on-statechange="mapStateToThis" action="[[action]]"></redux-store>
    <!-- if no quizzes, say "no quizzes yet" -->
    <template is="dom-repeat" items="[[quizzes]]" as="quiz">
      <div class="quiz-row"><a href$="courses/view-quiz/course/asdf/quiz/[[quiz.id]]/quiz-session-id/asdf">
        <template is="dom-if" if="[[quiz.hasEditAccess]]">
          <paper-icon-button id="edit-quiz[[quiz.id]]" class="quiz-icon" icon="create" on-tap="editQuiz"></paper-icon-button>
          <paper-tooltip for="edit-quiz[[quiz.id]]" offset="0" animation-delay="300">Edit Quiz</paper-tooltip>
          <paper-icon-button id="delete-quiz[[quiz.id]]" class="quiz-icon" icon="delete" on-tap="openDeleteModal" delete="[[quiz.id]]"></paper-icon-button>
          <paper-tooltip for="delete-quiz[[quiz.id]]" offset="0" animation-delay="300">Delete Quiz</paper-tooltip>
        </template>
        <span>[[quiz.title]]</span>
      </a></div>
    </template>
    <h4 hidden$="[[hasQuizzes(quizzes)]]">This concept doesn't have any quizzes yet.</h4>
    <paper-button class="add-quiz-button" raised="true" title="Add Quiz" on-tap="addQuiz">Add Quiz</paper-button>

    <paper-dialog id="confirm-delete-modal" modal>
      <h2>Confirm Delete</h2>
      <p>Are you sure you want to delete this quiz?  If you delete it, collaborators will lose access.</p>
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button class="delete-button" on-tap="deleteQuiz">Delete</paper-button>
      </div>
    </paper-dialog>
    <prendus-notification error-message="[[errorMessage]]" success-message="[[successMessage]]"></prendus-notification>
  </template>

  <!--<script src="prendus-concept-quiz-container.js"></script>-->
</dom-module>
